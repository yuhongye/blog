### 1. 时延，丢包，吞吐量
分组从源主机到目的主机，需要通过一系列路由器，当分组从一个节点（主机和路由器）沿着这条路径到后继节点，该分组在每个节点经受了几种不同的时延，最重要的如下图所示.
```java
    路由器A                                                                       路由器B
--------------------------------------------------------------                 ---------  
|  ---------      -------------------      ------------------ |    传播时延     |        |   
|  |处理时延 |--> | 发送路由B的分组队列 | --> |  将分组推向链路 | |--------------- |       |
|  ---------      -------------------      ------------------ |                |        |
--------------------------------------------------------------                 ---------

```
几个主要的时延:

* 处理时延: 检查分组首部和决定应该将该分组发送给谁，校验等，微妙级
* 排队时延: 节点给每个下游节点创建了一个缓冲队列，如果当前有向目的节点发送的分组，则新到达的分组就要先放到队列中，路由器一般按照FIFO的规则进行发送。
* 传输时间: 节点把分组推向链路的时间，它是分组长度L和链路传输速率的函数: L/R
* 传播时延: 一个bit从链路的一端到链路的一端所需的时间，它是两个节点之间距离的函数

关于传输时延和传播时延有必要多说明一下。比如分组长度1000b，链路传输率: 10kbps, 那么传输时间就是: 1000/10000=0.1s, 也就是说从第一个bit到达链路,过了0.1s后最后一个bit才刚到链路上。传播时延主要受传输介质的物理性限定，比如两个节点的距离恰好等于物理媒介的传输速率，也就是需要1s才能走完整个链路。

__丢包__: 分组缓冲队列不是无限大的，如果分组到达速率超过了节点的发送速率，那么某些分组就会被丢掉。因此衡量一个节点的性能不仅仅根据时延，还要看丢包率。

### 2. 分层和封装
Tcp/Ip协议分成5层（或者4层，把物理层和链路层合并)，并且每层都会对上一层的数据进行封装，增加本层协议需要的内容，如下图所示
```java
                  -----            --------------
          Message | M |            |    应用层   |
                  -----            --------------
              ---------            --------------
      Segment | S | M |            |    传输层   |
              ---------            --------------
          -------------            --------------
 Datagram | D | S | M |            |    网络层   |
          -------------            --------------
      -----------------            --------------
Frame | F | D | S | M |            | 链路-物理层  |
      -----------------            --------------
```
